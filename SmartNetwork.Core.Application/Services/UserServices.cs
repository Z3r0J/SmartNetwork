using AutoMapper;
using SmartNetwork.Core.Application.Helpers;
using SmartNetwork.Core.Application.Interfaces.Repository;
using SmartNetwork.Core.Application.Interfaces.Services;
using SmartNetwork.Core.Application.ViewModel.Users;
using SmartNetwork.Core.Domain.Entities;
using System;
using System.Collections.Generic;
using System.Threading.Tasks;

namespace SmartNetwork.Core.Application.Services
{
    public class UserServices : GenericServices<SaveUserViewModel, UserViewModel, User>, IUserServices
    {
        private readonly IUserRepository _repository;
        private readonly IMapper _mapper;
        private readonly IEmailServices _emailServices;
        public UserServices(IUserRepository repository, IMapper mapper, IEmailServices emailServices) : base(repository, mapper)
        {
            _repository = repository;
            _mapper = mapper;
            _emailServices = emailServices;
        }

        public async Task<UserViewModel> Login(LoginViewModel vm) {

            var response = await _repository.LoginAsync(vm);

            return _mapper.Map<UserViewModel>(response);

        }

        public async override Task<SaveUserViewModel> Add(SaveUserViewModel vm) {

            SaveUserViewModel Savevm = await base.Add(vm);

            if (Savevm == null)
            {
                return null;
            }

            await _emailServices.SendAsync(new() {
                To = Savevm.Email,
                Subject = "Welcome to SmartNetwork",
                Body = $" <table align='center' class='m_8434762703074949762container' style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;width:580px;margin:0 auto;Margin:0 auto;float:none;text-align:center;background: #ffffff;' width='580' valign='top'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;border-collapse:collapse!important' valign='top' align='left'> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;width:100%;display:table' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:564px;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='564' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'></th> <td align='right' style='padding:0px;margin:0px auto;font-size:0px;line-height:1px;padding:0px;font-size:0px;line-height:100%;padding:0px'> <a href='#' style='text-decoration:none;border-style:none;border:0px;padding:0px;margin:0px;color:#1da1f2;text-decoration:none' target='_blank'> <img src='https://i.imgur.com/wRkWJvg.png' width='180' alt='SmartNetwork' title='SmartNetwork' style='margin:0px;padding:0px;display:inline-block;border:none;outline:none' class='CToWUd'> </a> </td></tr></tbody> </table> </th> </tr></tbody> </table> </td></tr></tbody> </table> <table align='center' class='m_8434762703074949762container' style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;background:#000000;;width:580px;margin:0 auto;Margin:0 auto;float:none;text-align:center' width='580' valign='top'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;border-collapse:collapse!important' valign='top' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='18px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:18px;line-height:18px;border-collapse:collapse!important' valign='top' align='left'>&nbsp;</td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;width:100%;display:table' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762body-message m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:564px;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='564' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;background:#000000;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:100%;padding-bottom:0!important;padding-left:22px!important;padding-right:22px!important' width='100%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='20px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:20px;line-height:20px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:100%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='100%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <h5 style='padding:0;margin:0;Margin:0;word-wrap:normal;font-family:Helvetica,Arial,sans-serif;Margin-bottom:10px;font-size: 24px;font-weight:normal;font-style:normal;font-stretch:normal;line-height:1.12;letter-spacing:normal;text-align:center;color:#fff;margin-bottom:16px;/* border-bottom:solid 1px #d0cfd2; */'>Hello, {Savevm.Name} {Savevm.LastName}!</h5> </th> <th class='m_8434762703074949762expander' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;width:0;padding:0!important' align='left'></th> </tr></tbody> </table> </th> </tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:100%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='100%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align: center;font-size:16px;line-height:1.3;color:#fff;' align='left'> <p style='font-family:Helvetica,Arial,sans-serif;padding:0;Margin:0;text-align:left;line-height:1.3;margin-bottom:10px;Margin-bottom:10px;color:#fff;font-size:16px;font-weight:400;margin:0'> We are glad you have decided to join our Social Network. Let’s cut straight to the chase! Please, follow the button below to confirm your account and use the password to login. Yes, it is that simple!<br><br></p><br><br><a href='https://localhost:44334/User/Activate/{Savevm.Id}' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding: 20px;top: 0px;/* margin:0; *//* Margin:0; */text-align:center;line-height:1.3;/* color:#2199e8; */text-decoration:underline;color:#FFF;width: 50px;height: 67px!important;background: #1fb4d1;border-radius: 9px;text-decoration: none;' target='_blank'>Activate my account</a><br><br></th> <th class='m_8434762703074949762expander' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;width:0;padding:0!important' align='left'></th> </tr></tbody> </table> </th> </tr></tbody> </table> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='30px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:30px;line-height:30px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='16px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:16px;line-height:16px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:100%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='100%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <p style='font-family:Helvetica,Arial,sans-serif;padding:0;Margin:0;line-height:1.3;Margin-bottom:10px;text-align:center;font-size:16px;font-weight:400;margin:0;color:#797979;margin-bottom:10px'> Please, give us a feedback on the updates <img data-emoji='💛' class='an1' alt='💛' aria-label='💛' src='https://fonts.gstatic.com/s/e/notoemoji/14.0/1f49b/32.png' loading='lazy'><br>Write an email to <a href='mailto:spgestorpacientes@gmail.com' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;line-height:1.3;color:#2199e8;text-decoration:underline' target='_blank'>spgestorpacientes@gmail.com</a> or comment on the latest post on our social media. Cheers! <img data-emoji='🍻' class='an1' alt='🍻' aria-label='🍻' src='https://fonts.gstatic.com/s/e/notoemoji/14.0/1f37b/32.png' loading='lazy'> </p><table align='center' class='m_8434762703074949762row m_8434762703074949762menu' style='border-spacing:0;border-collapse:collapse;vertical-align:top;padding:0;margin:0 auto;Margin:0 auto;float:none;text-align:center;display:table;width:auto!important' valign='top'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-4 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <a href='#' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;line-height:1.3;color:#2199e8;text-decoration:underline;margin-right:16px;display:inline-block' target='_blank'> <img src='https://icon-library.com/images/facebook-icon-png-32x32/facebook-icon-png-32x32-0.jpg' alt='fb' style='outline:none;text-decoration:none;width:auto;width:32px; height:32px;max-width:100%;clear:both;display:block;border:none' class='CToWUd'> </a> </th> </tr></tbody> </table> </th> <th class='m_8434762703074949762small-4 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <a href='#' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;line-height:1.3;color:#2199e8;text-decoration:underline;margin-right:16px;display:inline-block' target='_blank'> <img src='https://images.vexels.com/media/users/3/137419/isolated/lists/b1a3fab214230557053ed1c4bf17b46c-logotipo-de-icono-de-twitter.png' alt='twitter' style='outline:none;text-decoration:none;width:32px; height:32px;max-width:100%;clear:both;display:block;border:none' class='CToWUd'> </a> </th> </tr></tbody> </table> </th> <th class='m_8434762703074949762small-4 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <a href='#' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;line-height:1.3;color:#2199e8;text-decoration:underline' target='_blank'> <img src='https://cdn.iconscout.com/icon/free/png-256/instagram-1946323-1646407.png' alt='instagram' style='outline:none;text-decoration:none;width:32px;height:32px;max-width:100%;clear:both;display:block;border:none' class='CToWUd'> </a> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='16px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:16px;line-height:16px;border-collapse:collapse!important' valign='top' align='left'>&nbsp;</td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;background:#1fb4d1;padding:0;width:100%;display:table' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:564px;padding-bottom:0!important;padding-left:32px!important;padding-right:32px!important' width='564' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='15px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:15px;line-height:15px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762mgb-sm-16 m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;margin-bottom:16px!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> </th> </tr></tbody> </table> </th> <th class='m_8434762703074949762mgb-sm-16 m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;margin-bottom:16px!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:center;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:center;font-size:16px;line-height:1.3;color:#fff' align='center'> <p class='m_8434762703074949762small-text-center' style='font-family:Helvetica,Arial,sans-serif;padding:0;margin:0;Margin:0;Margin-bottom:10px;font-size:16px;font-weight:400;line-height:1.3;text-align:center;text-transform:uppercase;margin-bottom:0;color:#fff!important'> © {DateTime.Now.Year} Copyright - All right reserved to Jean Carlos </p></th> </tr></tbody> </table> </th> </tr></tbody> </table> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='23px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:23px;line-height:23px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </td></tr></tbody> </table>"

            });

            return Savevm;
        }

        public async Task<bool> CheckUsername(string username) {
            var response = await _repository.CheckUsername(username);

            return response != null ? true : false;
        }

        public async Task ChangePassword(string username) {

            var response = await _repository.CheckUsername(username);

            var newPassword = GeneratePassword.RandomPassword(8);

            response.Password = PasswordEncryption.ComputeSHA256Hash(newPassword);

            await _repository.UpdateAsync(response, response.Id);

            await _emailServices.SendAsync(new()
            {
                To = response.Email,
                Subject = "Change Password to SmartNetworkAccount",
                Body = $" <table align='center' class='m_8434762703074949762container' style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;width:580px;margin:0 auto;Margin:0 auto;float:none;text-align:center;background: #ffffff;' width='580' valign='top'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;border-collapse:collapse!important' valign='top' align='left'> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;width:100%;display:table' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:564px;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='564' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'></th> <td align='right' style='padding:0px;margin:0px auto;font-size:0px;line-height:1px;padding:0px;font-size:0px;line-height:100%;padding:0px'> <a href='#' style='text-decoration:none;border-style:none;border:0px;padding:0px;margin:0px;color:#1da1f2;text-decoration:none' target='_blank'> <img src='https://i.imgur.com/wRkWJvg.png' width='180' alt='SmartNetwork' title='SmartNetwork' style='margin:0px;padding:0px;display:inline-block;border:none;outline:none' class='CToWUd'> </a> </td></tr></tbody> </table> </th> </tr></tbody> </table> </td></tr></tbody> </table> <table align='center' class='m_8434762703074949762container' style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;background:#000000;;width:580px;margin:0 auto;Margin:0 auto;float:none;text-align:center' width='580' valign='top'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;border-collapse:collapse!important' valign='top' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='18px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:18px;line-height:18px;border-collapse:collapse!important' valign='top' align='left'>&nbsp;</td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;width:100%;display:table' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762body-message m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:564px;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='564' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;background:#000000;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:100%;padding-bottom:0!important;padding-left:22px!important;padding-right:22px!important' width='100%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='20px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:20px;line-height:20px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:100%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='100%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <h5 style='padding:0;margin:0;Margin:0;word-wrap:normal;font-family:Helvetica,Arial,sans-serif;Margin-bottom:10px;font-size: 24px;font-weight:normal;font-style:normal;font-stretch:normal;line-height:1.12;letter-spacing:normal;text-align:center;color:#fff;margin-bottom:16px;/* border-bottom:solid 1px #d0cfd2; */'>Hello, {response.Name} {response.LastName}!</h5> </th> <th class='m_8434762703074949762expander' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;width:0;padding:0!important' align='left'></th> </tr></tbody> </table> </th> </tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:100%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='100%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align: center;font-size:16px;line-height:1.3;color:#fff;' align='left'> <p style='font-family:Helvetica,Arial,sans-serif;padding:0;Margin:0;text-align:left;line-height:1.3;margin-bottom:10px;Margin-bottom:10px;color:#fff;font-size:16px;font-weight:400;margin:0'> Hey {response.Name}, You was made a request to change your password and the new password of your account is: </p><br><br><span style='color:#1fb4d1; font-size:23px;'>{newPassword}</span> <br><br/> <br/> <a href='https://localhost:44334/User/Index' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding: 20px;top: 0px;/* margin:0; *//* Margin:0; */text-align:center;line-height:1.3;/* color:#2199e8; */text-decoration:underline;color:#FFF;width: 50px;height: 67px!important;background: #1fb4d1;border-radius: 9px;text-decoration: none;' target='_blank'>Login with my account</a><br><br></th> <th class='m_8434762703074949762expander' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;width:0;padding:0!important' align='left'></th> </tr></tbody> </table> </th> </tr></tbody> </table> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='30px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:30px;line-height:30px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='16px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:16px;line-height:16px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:100%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='100%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <p style='font-family:Helvetica,Arial,sans-serif;padding:0;Margin:0;line-height:1.3;Margin-bottom:10px;text-align:center;font-size:16px;font-weight:400;margin:0;color:#797979;margin-bottom:10px'> Please, give us a feedback on the updates <img data-emoji='💛' class='an1' alt='💛' aria-label='💛' src='https://fonts.gstatic.com/s/e/notoemoji/14.0/1f49b/32.png' loading='lazy'><br>Write an email to <a href='mailto:spgestorpacientes@gmail.com' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;line-height:1.3;color:#2199e8;text-decoration:underline' target='_blank'>spgestorpacientes@gmail.com</a> or comment on the latest post on our social media. Cheers! <img data-emoji='🍻' class='an1' alt='🍻' aria-label='🍻' src='https://fonts.gstatic.com/s/e/notoemoji/14.0/1f37b/32.png' loading='lazy'> </p><table align='center' class='m_8434762703074949762row m_8434762703074949762menu' style='border-spacing:0;border-collapse:collapse;vertical-align:top;padding:0;margin:0 auto;Margin:0 auto;float:none;text-align:center;display:table;width:auto!important' valign='top'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-4 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <a href='#' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;line-height:1.3;color:#2199e8;text-decoration:underline;margin-right:16px;display:inline-block' target='_blank'> <img src='https://icon-library.com/images/facebook-icon-png-32x32/facebook-icon-png-32x32-0.jpg' alt='fb' style='outline:none;text-decoration:none;width:auto;width:32px; height:32px;max-width:100%;clear:both;display:block;border:none' class='CToWUd'> </a> </th> </tr></tbody> </table> </th> <th class='m_8434762703074949762small-4 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <a href='#' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;line-height:1.3;color:#2199e8;text-decoration:underline;margin-right:16px;display:inline-block' target='_blank'> <img src='https://images.vexels.com/media/users/3/137419/isolated/lists/b1a3fab214230557053ed1c4bf17b46c-logotipo-de-icono-de-twitter.png' alt='twitter' style='outline:none;text-decoration:none;width:32px; height:32px;max-width:100%;clear:both;display:block;border:none' class='CToWUd'> </a> </th> </tr></tbody> </table> </th> <th class='m_8434762703074949762small-4 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <a href='#' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;line-height:1.3;color:#2199e8;text-decoration:underline' target='_blank'> <img src='https://cdn.iconscout.com/icon/free/png-256/instagram-1946323-1646407.png' alt='instagram' style='outline:none;text-decoration:none;width:32px;height:32px;max-width:100%;clear:both;display:block;border:none' class='CToWUd'> </a> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='16px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:16px;line-height:16px;border-collapse:collapse!important' valign='top' align='left'>&nbsp;</td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;background:#1fb4d1;padding:0;width:100%;display:table' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:564px;padding-bottom:0!important;padding-left:32px!important;padding-right:32px!important' width='564' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='15px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:15px;line-height:15px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> <table class='m_8434762703074949762row' style='border-spacing:0;border-collapse:collapse;vertical-align:top;text-align:left;padding:0;display:table;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th class='m_8434762703074949762mgb-sm-16 m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;margin-bottom:16px!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;font-size:16px;line-height:1.3;color:#fff' align='left'> </th> </tr></tbody> </table> </th> <th class='m_8434762703074949762mgb-sm-16 m_8434762703074949762small-12 m_8434762703074949762columns' style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;text-align:left;font-size:16px;line-height:1.3;color:#fff;margin:0 auto;Margin:0 auto;width:33.33333%;padding-bottom:0!important;margin-bottom:16px!important;padding-left:0!important;padding-right:0!important' width='33.33333%' align='left'> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:center;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <th style='font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:center;font-size:16px;line-height:1.3;color:#fff' align='center'> <p class='m_8434762703074949762small-text-center' style='font-family:Helvetica,Arial,sans-serif;padding:0;margin:0;Margin:0;Margin-bottom:10px;font-size:16px;font-weight:400;line-height:1.3;text-align:center;text-transform:uppercase;margin-bottom:0;color:#fff!important'> ©{DateTime.Now.Year}Copyright - All right reserved to Jean Carlos </p></th> </tr></tbody> </table> </th> </tr></tbody> </table> <table style='border-spacing:0;border-collapse:collapse;padding:0;vertical-align:top;text-align:left;width:100%' width='100%' valign='top' align='left'> <tbody> <tr style='padding:0;vertical-align:top;text-align:left' valign='top' align='left'> <td height='23px' style='word-wrap:break-word;vertical-align:top;font-family:Helvetica,Arial,sans-serif;font-weight:normal;padding:0;margin:0;Margin:0;text-align:left;color:#fff;font-size:23px;line-height:23px;border-collapse:collapse!important' valign='top' align='left'> &nbsp; </td></tr></tbody> </table> </th> </tr></tbody> </table> </th> </tr></tbody> </table> </td></tr></tbody> </table>"
            });

        }

        public async Task<List<UserViewModel>> GetAllViewModelWithInclude() {

            var UserList = await _repository.GetAllWithIncludeAsync(new() { "Posts", "Comments","Likes", "FriendsByYou","FriendsByOther" });

            var response = _mapper.Map<List<UserViewModel>>(UserList);

            //var response = UserList.Select(user => new UserViewModel {
            //Id =user.Id,
            //Name = user.Name,
            //LastName = user.LastName,
            //PhotoUrl = user.PhotoUrl,
            //Email = user.Email,
            //Phone=user.Phone,
            //Username =user.Username,
            //Password = user.Password,
            //Status = user.Status,
            //Comments = _mapper.Map<List<CommentViewModel>>(user.Comments.ToList()),
            //Likes = _mapper.Map<List<LikeViewModel>>(user.Likes.ToList()),
            //Posts = _mapper.Map<List<PostViewModel>>(user.Posts.ToList())

            //}).ToList();

            return response;
        }

    }
}
